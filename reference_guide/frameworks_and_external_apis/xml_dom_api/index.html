
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../art/icon16.svg">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.3">
    
    
      
        <title>XML DOM API - consulo.dev</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.edf004c2.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.e6a45f82.min.css">
        
          
          
          <meta name="theme-color" content="#4cae4f">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="green" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#abstract" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="consulo.dev" class="md-header__button md-logo" aria-label="consulo.dev" data-md-component="logo">
      
  <img src="../../../art/icon16.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            consulo.dev
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              XML DOM API
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/consulo/consulo-dev.github.io/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        Home
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../platform/fundamentals/" class="md-tabs__link md-tabs__link--active">
        Architecture
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../basics/basics/" class="md-tabs__link">
        Creating Own Plugin
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="consulo.dev" class="md-nav__button md-logo" aria-label="consulo.dev" data-md-component="logo">
      
  <img src="../../../art/icon16.svg" alt="logo">

    </a>
    consulo.dev
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/consulo/consulo-dev.github.io/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Home
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Home" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Welcome
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2" type="checkbox" id="__nav_1_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_2">
          Organization
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Organization" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_2">
          <span class="md-nav__icon md-icon"></span>
          Organization
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../organization/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../organization/repository_list/" class="md-nav__link">
        Repositories
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Architecture
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Architecture" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Architecture
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1">
          Fundamentals
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Fundamentals" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Fundamentals
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../platform/fundamentals/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/disposers/" class="md-nav__link">
        Disposer and Disposable
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_3" type="checkbox" id="__nav_2_1_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_3">
          Threading
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Threading" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_3">
          <span class="md-nav__icon md-icon"></span>
          Threading
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/architectural_overview/general_threading_rules/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../messaging_infrastructure/" class="md-nav__link">
        Messaging Infrastructure
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_5" type="checkbox" id="__nav_2_1_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_5">
          Boot Information
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Boot Information" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_5">
          <span class="md-nav__icon md-icon"></span>
          Boot Information
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/boot/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/boot/boot.directories/" class="md-nav__link">
        Boot Directories
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../platform/restriction/" class="md-nav__link">
        Code Restriction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../platform/permissions/" class="md-nav__link">
        Permissions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/intellij.to.consulo.api/" class="md-nav__link">
        Migration from IntelliJ Platform to Consulo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../platform/desktop/spi.impl/" class="md-nav__link">
        SPI Implementations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          Actions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Actions" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Actions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/action_system/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2_2" type="checkbox" id="__nav_2_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2_2">
          Actions Tutorial
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Actions Tutorial" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_2_2">
          <span class="md-nav__icon md-icon"></span>
          Actions Tutorial
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/action_system/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/action_system/working_with_custom_actions/" class="md-nav__link">
        Creating Actions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/action_system/grouping_action/" class="md-nav__link">
        Grouping Actions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3">
          Persistence
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Persistence" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Persistence
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/persistence/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/persisting_state_of_components/" class="md-nav__link">
        Persisting State of Components
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/persisting_sensitive_data/" class="md-nav__link">
        Persisting Sensitive Data
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4" type="checkbox" id="__nav_2_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_4">
          Project Model
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Project Model" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          Project Model
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/project_structure/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4_2" type="checkbox" id="__nav_2_4_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_4_2">
          Project
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Project" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_4_2">
          <span class="md-nav__icon md-icon"></span>
          Project
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../project_model/project/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../platform/project_model/project/startupactivity/" class="md-nav__link">
        Startup Activity
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../project_model/module/" class="md-nav__link">
        Module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../project_model/sdk/" class="md-nav__link">
        SDK
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../project_model/library/" class="md-nav__link">
        Library
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../external_system_integration/" class="md-nav__link">
        External System Integration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5" type="checkbox" id="__nav_2_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_5">
          Settings
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Settings" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_5">
          <span class="md-nav__icon md-icon"></span>
          Settings
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/settings/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../settings_guide/" class="md-nav__link">
        Settings Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../settings_groups/" class="md-nav__link">
        Custom Groups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/settings_tutorial/" class="md-nav__link">
        Settings Tutorial
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6" type="checkbox" id="__nav_2_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_6">
          Files
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Files" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_6">
          <span class="md-nav__icon md-icon"></span>
          Files
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/architectural_overview/files/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/virtual_file_system/" class="md-nav__link">
        Virtual File System
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/architectural_overview/virtual_file/" class="md-nav__link">
        Virtual Files
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/architectural_overview/documents/" class="md-nav__link">
        Documents
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_8" type="checkbox" id="__nav_2_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_8">
          Editors
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Editors" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_8">
          <span class="md-nav__icon md-icon"></span>
          Editors
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../editors/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_8_2" type="checkbox" id="__nav_2_8_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_8_2">
          Editor Basics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Editor Basics" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_8_2">
          <span class="md-nav__icon md-icon"></span>
          Editor Basics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/editor_basics/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/editor_basics/working_with_text/" class="md-nav__link">
        1. Working with Text
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/editor_basics/coordinates_system/" class="md-nav__link">
        2. Editor Coordinates System. Positions and Offsets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/editor_basics/editor_events/" class="md-nav__link">
        3. Handling Editor Events
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../multiple_carets/" class="md-nav__link">
        Multiple Carets
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_9" type="checkbox" id="__nav_2_9" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_9">
          PSI
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="PSI" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_9">
          <span class="md-nav__icon md-icon"></span>
          PSI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/architectural_overview/psi/" class="md-nav__link">
        What Is the PSI?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/architectural_overview/psi_files/" class="md-nav__link">
        PSI Files
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/architectural_overview/file_view_providers/" class="md-nav__link">
        File View Providers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/architectural_overview/psi_elements/" class="md-nav__link">
        PSI Elements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/architectural_overview/navigating_psi/" class="md-nav__link">
        Navigating the PSI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/architectural_overview/psi_references/" class="md-nav__link">
        References
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/architectural_overview/modifying_psi/" class="md-nav__link">
        Modifying the PSI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/psi_cookbook/" class="md-nav__link">
        PSI Cookbook
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_9_9" type="checkbox" id="__nav_2_9_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_9_9">
          Indexing and PSI Stubs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Indexing and PSI Stubs" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_9_9">
          <span class="md-nav__icon md-icon"></span>
          Indexing and PSI Stubs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/indexing_and_psi_stubs/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/indexing_and_psi_stubs/file_based_indexes/" class="md-nav__link">
        File-Based Indexes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/indexing_and_psi_stubs/stub_indexes/" class="md-nav__link">
        Stub Indexes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          XML DOM API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        XML DOM API
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#abstract" class="md-nav__link">
    Abstract
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-the-model" class="md-nav__link">
    Building the Model
  </a>
  
    <nav class="md-nav" aria-label="Building the Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tag-content" class="md-nav__link">
    Tag Content
  </a>
  
    <nav class="md-nav" aria-label="Tag Content">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-value-types" class="md-nav__link">
    Custom Value Types
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attributes" class="md-nav__link">
    Attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#children-fixed-number" class="md-nav__link">
    Children: Fixed Number
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#children-collections" class="md-nav__link">
    Children: Collections
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dynamic-definition" class="md-nav__link">
    Dynamic Definition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generating-dom-from-existing-xsd" class="md-nav__link">
    Generating DOM from Existing XSD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ide-support" class="md-nav__link">
    IDE Support
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-the-dom" class="md-nav__link">
    Working with the DOM
  </a>
  
    <nav class="md-nav" aria-label="Working with the DOM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#class-choosers" class="md-nav__link">
    Class Choosers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#useful-methods-of-domelement-and-dommanager" class="md-nav__link">
    Useful Methods of DomElement and DomManager
  </a>
  
    <nav class="md-nav" aria-label="Useful Methods of DomElement and DomManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#psi-connection" class="md-nav__link">
    PSI Connection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tree-structure" class="md-nav__link">
    Tree Structure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validity" class="md-nav__link">
    Validity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dom-reflection" class="md-nav__link">
    DOM Reflection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presentation" class="md-nav__link">
    Presentation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#events" class="md-nav__link">
    Events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#highlighting-annotations" class="md-nav__link">
    Highlighting Annotations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automatic-highlighting-basicdomelementsinspection" class="md-nav__link">
    Automatic Highlighting (BasicDomElementsInspection)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#required-children" class="md-nav__link">
    Required Children
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resolving" class="md-nav__link">
    Resolving
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mock-and-stable-elements" class="md-nav__link">
    Mock and Stable Elements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#visitor" class="md-nav__link">
    Visitor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation" class="md-nav__link">
    Implementation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models-across-multiple-files" class="md-nav__link">
    Models Across Multiple Files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dom-stubs" class="md-nav__link">
    DOM Stubs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-a-dom-based-gui" class="md-nav__link">
    Building a DOM-Based GUI
  </a>
  
    <nav class="md-nav" aria-label="Building a DOM-Based GUI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#forms" class="md-nav__link">
    Forms
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-controls" class="md-nav__link">
    Simple Controls
  </a>
  
    <nav class="md-nav" aria-label="Simple Controls">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#booleancontrol" class="md-nav__link">
    BooleanControl
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combocontrol" class="md-nav__link">
    ComboControl
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#booleanenumcontrol" class="md-nav__link">
    BooleanEnumControl
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#editor-based-controls" class="md-nav__link">
    Editor-Based Controls
  </a>
  
    <nav class="md-nav" aria-label="Editor-Based Controls">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#textcontrol" class="md-nav__link">
    TextControl
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psiclasscontrol" class="md-nav__link">
    PsiClassControl
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psitypecontrol" class="md-nav__link">
    PsiTypeControl
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collection-control" class="md-nav__link">
    Collection Control
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ui-organization" class="md-nav__link">
    UI Organization
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    Conclusion
  </a>
  
    <nav class="md-nav" aria-label="Conclusion">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#further-material" class="md-nav__link">
    Further Material
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_10" type="checkbox" id="__nav_2_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_10">
          Run Configurations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Run Configurations" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_10">
          <span class="md-nav__icon md-icon"></span>
          Run Configurations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/run_configurations/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/run_configurations/run_configuration_management/" class="md-nav__link">
        Run Configuration Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/run_configurations/run_configuration_execution/" class="md-nav__link">
        Execution
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/run_configurations/" class="md-nav__link">
        Run Configurations Tutorial
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_11" type="checkbox" id="__nav_2_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_11">
          Version Control Systems
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Version Control Systems" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_11">
          <span class="md-nav__icon md-icon"></span>
          Version Control Systems
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vcs_integration_for_plugins/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_12" type="checkbox" id="__nav_2_12" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_12">
          User Interface
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User Interface" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_12">
          <span class="md-nav__icon md-icon"></span>
          User Interface
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../platform/ui/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../platform/ui/localization/" class="md-nav__link">
        Localization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../platform/ui/image/" class="md-nav__link">
        Image Library
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_12_4" type="checkbox" id="__nav_2_12_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_12_4">
          Swing (Desktop Only)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Swing (Desktop Only)" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_12_4">
          <span class="md-nav__icon md-icon"></span>
          Swing (Desktop Only)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user_interface_components/user_interface_components/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user_interface_components/tool_windows/" class="md-nav__link">
        Tool Windows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user_interface_components/dialog_wrapper/" class="md-nav__link">
        Dialogs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user_interface_components/popups/" class="md-nav__link">
        Popups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user_interface_components/notifications/" class="md-nav__link">
        Notifications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user_interface_components/file_and_class_choosers/" class="md-nav__link">
        File and Class Choosers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user_interface_components/editor_components/" class="md-nav__link">
        Editor Components
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user_interface_components/lists_and_trees/" class="md-nav__link">
        List and Tree Controls
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user_interface_components/misc_swing_components/" class="md-nav__link">
        Miscellaneous Swing Components
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../work_with_icons_and_images/" class="md-nav__link">
        Icons and Images
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../color_scheme_management/" class="md-nav__link">
        Color Scheme Management
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../platform/update_channels/" class="md-nav__link">
        Update Channels
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../platform/internal_libraries/" class="md-nav__link">
        Internal Libraries
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Creating Own Plugin
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Creating Own Plugin" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Creating Own Plugin
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          Quick Start Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Quick Start Guide" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Quick Start Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/basics/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_2" type="checkbox" id="__nav_3_1_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_2">
          Plugin Structure
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Plugin Structure" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_1_2">
          <span class="md-nav__icon md-icon"></span>
          Plugin Structure
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/plugin_structure/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/plugin_structure/plugin_configuration_file/" class="md-nav__link">
        Configuration File
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/plugin_structure/plugin_content/" class="md-nav__link">
        Content
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/plugin_structure/plugin_dependencies/" class="md-nav__link">
        Dependencies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/plugin_structure/plugin_extension_points/" class="md-nav__link">
        Extension Points
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/plugin_structure/plugin_extensions/" class="md-nav__link">
        Extensions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/plugin_structure/plugin_actions/" class="md-nav__link">
        Actions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/plugin_structure/plugin_class_loaders/" class="md-nav__link">
        ClassLoaders
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/plugin_structure/plugin_components/" class="md-nav__link">
        Components
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/plugin_structure/plugin_services/" class="md-nav__link">
        Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/plugin_structure/plugin_listeners/" class="md-nav__link">
        Listeners
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/plugin_structure/plugin_icon_file/" class="md-nav__link">
        Icon File
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/types_of_plugins/" class="md-nav__link">
        Main Types of Plugins
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2">
          Custom Language Support
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Custom Language Support" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Custom Language Support
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../custom_language_support/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../custom_language_support/registering_file_type/" class="md-nav__link">
        Registering File Type
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../custom_language_support/implementing_lexer/" class="md-nav__link">
        Implementing Lexer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../custom_language_support/implementing_parser_and_psi/" class="md-nav__link">
        Implementing Parser and PSI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../custom_language_support/syntax_highlighting_and_error_highlighting/" class="md-nav__link">
        Syntax Highlighting and Error Highlighting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../custom_language_support/references_and_resolve/" class="md-nav__link">
        References and Resolve
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../custom_language_support/symbols/" class="md-nav__link">
        Symbols
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../custom_language_support/declarations_and_references/" class="md-nav__link">
        Declarations and References
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../custom_language_support/navigation/" class="md-nav__link">
        Navigation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../custom_language_support/code_completion/" class="md-nav__link">
        Code Completion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../custom_language_support/find_usages/" class="md-nav__link">
        Find Usages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../custom_language_support/rename_refactoring/" class="md-nav__link">
        Rename Refactoring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../custom_language_support/safe_delete_refactoring/" class="md-nav__link">
        Safe Delete Refactoring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../custom_language_support/code_formatting/" class="md-nav__link">
        Code Formatter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../custom_language_support/code_inspections_and_intentions/" class="md-nav__link">
        Code Inspections and Intentions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../custom_language_support/structure_view/" class="md-nav__link">
        Structure View
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../custom_language_support/surround_with/" class="md-nav__link">
        Surround With
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../custom_language_support/go_to_class_and_go_to_symbol/" class="md-nav__link">
        Go to Class and Go to Symbol
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../custom_language_support/documentation/" class="md-nav__link">
        Documentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../custom_language_support/additional_minor_features/" class="md-nav__link">
        Additional Minor Features
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_21" type="checkbox" id="__nav_3_2_21" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2_21">
          Editing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Editing" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_2_21">
          <span class="md-nav__icon md-icon"></span>
          Editing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/editing/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_21_2" type="checkbox" id="__nav_3_2_21_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2_21_2">
          Templates
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Templates" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_2_21_2">
          <span class="md-nav__icon md-icon"></span>
          Templates
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/templates/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_21_2_2" type="checkbox" id="__nav_3_2_21_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2_21_2_2">
          Live Templates
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Live Templates" data-md-level="5">
        <label class="md-nav__title" for="__nav_3_2_21_2_2">
          <span class="md-nav__icon md-icon"></span>
          Live Templates
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/live_templates/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/live_templates/template_support/" class="md-nav__link">
        Adding Live Templates to a Plugin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/live_templates/new_macros/" class="md-nav__link">
        Creating New Functions for Live Templates
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/code_intentions/" class="md-nav__link">
        Intentions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" type="checkbox" id="__nav_3_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_3">
          Project View
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Project View" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Project View
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../basics/project_view/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/tree_structure_view/" class="md-nav__link">
        Modifying Project View Structure
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#abstract" class="md-nav__link">
    Abstract
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-the-model" class="md-nav__link">
    Building the Model
  </a>
  
    <nav class="md-nav" aria-label="Building the Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tag-content" class="md-nav__link">
    Tag Content
  </a>
  
    <nav class="md-nav" aria-label="Tag Content">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-value-types" class="md-nav__link">
    Custom Value Types
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attributes" class="md-nav__link">
    Attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#children-fixed-number" class="md-nav__link">
    Children: Fixed Number
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#children-collections" class="md-nav__link">
    Children: Collections
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dynamic-definition" class="md-nav__link">
    Dynamic Definition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generating-dom-from-existing-xsd" class="md-nav__link">
    Generating DOM from Existing XSD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ide-support" class="md-nav__link">
    IDE Support
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-the-dom" class="md-nav__link">
    Working with the DOM
  </a>
  
    <nav class="md-nav" aria-label="Working with the DOM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#class-choosers" class="md-nav__link">
    Class Choosers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#useful-methods-of-domelement-and-dommanager" class="md-nav__link">
    Useful Methods of DomElement and DomManager
  </a>
  
    <nav class="md-nav" aria-label="Useful Methods of DomElement and DomManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#psi-connection" class="md-nav__link">
    PSI Connection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tree-structure" class="md-nav__link">
    Tree Structure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validity" class="md-nav__link">
    Validity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dom-reflection" class="md-nav__link">
    DOM Reflection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presentation" class="md-nav__link">
    Presentation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#events" class="md-nav__link">
    Events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#highlighting-annotations" class="md-nav__link">
    Highlighting Annotations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automatic-highlighting-basicdomelementsinspection" class="md-nav__link">
    Automatic Highlighting (BasicDomElementsInspection)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#required-children" class="md-nav__link">
    Required Children
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resolving" class="md-nav__link">
    Resolving
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mock-and-stable-elements" class="md-nav__link">
    Mock and Stable Elements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#visitor" class="md-nav__link">
    Visitor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation" class="md-nav__link">
    Implementation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models-across-multiple-files" class="md-nav__link">
    Models Across Multiple Files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dom-stubs" class="md-nav__link">
    DOM Stubs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-a-dom-based-gui" class="md-nav__link">
    Building a DOM-Based GUI
  </a>
  
    <nav class="md-nav" aria-label="Building a DOM-Based GUI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#forms" class="md-nav__link">
    Forms
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-controls" class="md-nav__link">
    Simple Controls
  </a>
  
    <nav class="md-nav" aria-label="Simple Controls">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#booleancontrol" class="md-nav__link">
    BooleanControl
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combocontrol" class="md-nav__link">
    ComboControl
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#booleanenumcontrol" class="md-nav__link">
    BooleanEnumControl
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#editor-based-controls" class="md-nav__link">
    Editor-Based Controls
  </a>
  
    <nav class="md-nav" aria-label="Editor-Based Controls">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#textcontrol" class="md-nav__link">
    TextControl
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psiclasscontrol" class="md-nav__link">
    PsiClassControl
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psitypecontrol" class="md-nav__link">
    PsiTypeControl
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collection-control" class="md-nav__link">
    Collection Control
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ui-organization" class="md-nav__link">
    UI Organization
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    Conclusion
  </a>
  
    <nav class="md-nav" aria-label="Conclusion">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#further-material" class="md-nav__link">
    Further Material
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/consulo/consulo-dev.github.io/edit/master/docs/reference_guide/frameworks_and_external_apis/xml_dom_api.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


  <h1>XML DOM API</h1>

<!-- Copyright 2000-2020 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

<!-- TODO content: DOM <=> PSI, Go To Symbol, editor gutter icon->DOM -->

<h2 id="abstract">Abstract</h2>
<p>This article is intended for plugin writers who create custom web server integrations, or some UI for easy XML editing.
It describes the <em>Document Object Model</em> (DOM) in Consulo --- an easy way to work with DTD or Schema-based XML models.
The following topics will be covered: working with DOM itself (reading/writing tags content, attributes, and subtags) and easy XML editing in the UI by connecting UI to DOM.</p>
<p>It's assumed that the reader is familiar with Java, Swing, Consulo XML PSI (classes <a href="upsource:///xml/xml-psi-api/src/com/intellij/psi/xml/XmlTag.java"><code>XmlTag</code></a>, <a href="upsource:///xml/xml-psi-api/src/com/intellij/psi/xml/XmlFile.java"><code>XmlFile</code></a>, <a href="upsource:///xml/xml-psi-api/src/com/intellij/psi/xml/XmlTagValue.java"><code>XmlTagValue</code></a>, etc.), Consulo plugin development basics (application and project components, file editors).</p>
<h2 id="introduction">Introduction</h2>
<p>So, how to operate with XML from an Consulo plugin? Usually, one has to take <code>XmlFile</code>, get its root tag, and then find a required sub-tag by path.
The path consists of tag names, each of them a string.
Typing these everywhere is tedious and error-prone.
Let's assume you have the following XML:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;root&gt;</span>
    <span class="nt">&lt;foo&gt;</span>
        <span class="nt">&lt;bar&gt;</span>42<span class="nt">&lt;/bar&gt;</span>
        <span class="nt">&lt;bar&gt;</span>239<span class="nt">&lt;/bar&gt;</span>
    <span class="nt">&lt;/foo&gt;</span>
<span class="nt">&lt;/root&gt;</span>
</code></pre></div>
<p>Let's say you want to read the contents of the second bar element, namely, "239".</p>
<p>It's <em>not</em> correct to create chained calls like</p>
<div class="highlight"><pre><span></span><code><span class="n">file</span><span class="p">.</span><span class="na">getDocument</span><span class="p">().</span><span class="na">getRootTag</span><span class="p">().</span><span class="na">findFirstSubTag</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">).</span>
<span class="n">findSubTags</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">)</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">.</span><span class="na">getValue</span><span class="p">().</span><span class="na">getTrimmedText</span><span class="p">()</span>
</code></pre></div>
<p>because each call here may return <code>null</code>.</p>
<p>So the code would probably look like this:</p>
<div class="highlight"><pre><span></span><code><span class="n">XmlFile</span> <span class="n">file</span> <span class="o">=</span> <span class="p">...;</span>
<span class="kd">final</span> <span class="n">XmlDocument</span> <span class="n">document</span> <span class="o">=</span> <span class="n">file</span><span class="p">.</span><span class="na">getDocument</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="n">document</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">final</span> <span class="n">XmlTag</span> <span class="n">rootTag</span> <span class="o">=</span> <span class="n">document</span><span class="p">.</span><span class="na">getRootTag</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">rootTag</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">final</span> <span class="n">XmlTag</span> <span class="n">foo</span> <span class="o">=</span> <span class="n">rootTag</span><span class="p">.</span><span class="na">findFirstSubTag</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">foo</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">final</span> <span class="n">XmlTag</span><span class="o">[]</span> <span class="n">bars</span> <span class="o">=</span> <span class="n">foo</span><span class="p">.</span><span class="na">findSubTags</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">bars</span><span class="p">.</span><span class="na">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="n">bars</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">.</span><span class="na">getValue</span><span class="p">().</span><span class="na">getTrimmedText</span><span class="p">();</span>
                <span class="c1">// do something</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Looks awful, doesn't it? But there's a better way to do the same thing.
You just need to extend a special interface --- <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/DomElement.java"><code>DomElement</code></a>.</p>
<p>For example, let's create several interfaces:</p>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span> <span class="nc">Root</span> <span class="kd">extends</span> <span class="n">com</span><span class="p">.</span><span class="na">intellij</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">xml</span><span class="p">.</span><span class="na">DomElement</span> <span class="p">{</span>
    <span class="n">Foo</span> <span class="nf">getFoo</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">interface</span> <span class="nc">Foo</span> <span class="kd">extends</span> <span class="n">com</span><span class="p">.</span><span class="na">intellij</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">xml</span><span class="p">.</span><span class="na">DomElement</span> <span class="p">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Bar</span><span class="o">&gt;</span> <span class="nf">getBars</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">interface</span> <span class="nc">Bar</span> <span class="kd">extends</span> <span class="n">com</span><span class="p">.</span><span class="na">intellij</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">xml</span><span class="p">.</span><span class="na">DomElement</span> <span class="p">{</span>
    <span class="n">String</span> <span class="nf">getValue</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>Next, you should create a <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/DomFileDescription.java"><code>DomFileDescription</code></a> object, pass to its constructor the root tag name and root element interface, and register it with extension point <code>com.intellij.dom.fileDescription</code>.</p>
<blockquote>
<p><strong>NOTE</strong> If your plugin targets 2019.1 or later, please use extension point <code>com.intellij.dom.fileMetaData</code> instead and specify <code>rootTagName</code> and <code>domVersion</code>/<code>stubVersion</code> in <code>plugin.xml</code>.</p>
</blockquote>
<p>You can now get the file element from <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/DomManager.java"><code>DomManager</code></a>.
To get the "239" value, you only have to write the following code:</p>
<div class="highlight"><pre><span></span><code><span class="n">DomManager</span> <span class="n">manager</span> <span class="o">=</span> <span class="n">DomManager</span><span class="p">.</span><span class="na">getDomManager</span><span class="p">(</span><span class="n">project</span><span class="p">);</span>
<span class="n">Root</span> <span class="n">root</span> <span class="o">=</span> <span class="n">manager</span><span class="p">.</span><span class="na">getFileElement</span><span class="p">(</span><span class="n">file</span><span class="p">).</span><span class="na">getRootElement</span><span class="p">();</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Bar</span><span class="o">&gt;</span> <span class="n">bars</span> <span class="o">=</span> <span class="n">root</span><span class="p">.</span><span class="na">getFoo</span><span class="p">().</span><span class="na">getBars</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="n">bars</span><span class="p">.</span><span class="na">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="n">bars</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="na">getValue</span><span class="p">();</span>
    <span class="c1">// do something</span>
<span class="p">}</span>
</code></pre></div>
<p>I suppose this looks a little bit nicer.
You often work with your model in more than one place.
Re-creating the model is too inefficient, so we cache it for you, and any subsequent calls to <code>DomManager.getFileElement()</code> will return the same instance.
So, it is useful to invoke this method just once, and then keep everywhere only the "root" object you've obtained.
In this case you wont need to repeat that scary first line, and the code will look even nicer.</p>
<p>It is also important to note that with this scenario we avoid potential <code>NullPointerException</code>: our DOM guarantees that every method accessing a tags child will return a not-null element, even if the correspondingly-named sub-tag doesn't exist.
That may seem strange at a first glance, but it appears to be rather convenient.
How does it work? Simple.
Given those interfaces, DOM generates all code for accessing correct sub-tags and creating model elements at runtime.
The sub-tag names and element types are taken from method names, return types and method annotations, if any.
In most cases annotations can be omitted, as in our example, but this is discussed further in this article anyway.</p>
<p>Now let us explore more thoroughly what the DOM can do, and look at possible ways of representing various XML concepts such as tag content, attributes or sub-tags.
Later we will discuss basic methods for working with the model, as well as cover more advanced functionality.
Finally, we'll see how to easily create an UI editor for DOM model elements.</p>
<h2 id="building-the-model">Building the Model</h2>
<h3 id="tag-content">Tag Content</h3>
<p>In XML PSI, tag content is referred to as tag value, so well do the same for consistency.
To read and change a tag value, you have to add two methods (getter and setter) to your interface, like this:</p>
<div class="highlight"><pre><span></span><code><span class="n">String</span> <span class="nf">getValue</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">setValue</span><span class="p">(</span><span class="n">String</span> <span class="n">s</span><span class="p">);</span>
</code></pre></div>
<p>These method names (<code>getValue</code> and <code>setValue</code>) are standard, and they are used for accessing tag values by default.
If you want to use custom method names for the same goal, you should annotate these methods with <code>@TagValue</code>, for example:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TagValue</span>
<span class="n">String</span> <span class="nf">getTagValue</span><span class="p">();</span>

<span class="nd">@TagValue</span>
<span class="kt">void</span> <span class="nf">setTagValue</span><span class="p">(</span><span class="n">String</span> <span class="n">s</span><span class="p">);</span>
</code></pre></div>
<p>As you can see, our accessors work with <code>String</code> values.
This is natural, since XML represents a text format, and tag content is always text.
But sometimes you may want to operate with integers, booleans, enums, or even class names (they, of course, will be represented as <code>PsiClass</code>), and more generic Java types (<code>PsiType</code>).
In such cases, you just need to change the type in methods to the one you need, and everything will keep working correctly.</p>
<h4 id="custom-value-types">Custom Value Types</h4>
<p>If you operate with even more exotic types, you should tell DOM how to deal with them.
First, annotate your accessor methods with the <code>@Convert</code> annotation, and specify your own class that should extend the <code>Converter&lt;T&gt;</code> class in the annotation.
Here <code>T</code> is your exotic type, while <code>Converter&lt;T&gt;</code> is a thing that knows how to convert values between <code>String</code> and <code>T</code>.
If the value cannot be converted (for example, "foo" is not convertible into <code>Integer</code>), the converter may return <code>null</code>.
Please also note that your implementation should have a no-argument constructor.</p>
<p>Let us consider an interesting case when <code>T</code> represents an enum value.
Usually, the converter just searches for enum elements with the names specified in XML.
But sometimes, for their names, you may need or want to use values that are not valid Java identifiers.
For example, CMP version in EJB may be "1.x" or "2.x", but you can't create Java enums with such names.
For such cases, let your enum implement <code>NamedEnum</code> interface, and then name your enum elements as you wish.
Now, just provide the <code>getValue()</code> implementation that will return the right value to match with XML contents, and voilà!
In our example, the code will look as follows:</p>
<div class="highlight"><pre><span></span><code><span class="kd">enum</span> <span class="n">CmpVersion</span> <span class="kd">implements</span> <span class="n">NamedEnum</span> <span class="p">{</span>
    <span class="n">CmpVersion_1_X</span> <span class="p">(</span><span class="s">&quot;1.x&quot;</span><span class="p">),</span>
    <span class="n">CmpVersion_2_X</span> <span class="p">(</span><span class="s">&quot;2.x&quot;</span><span class="p">);</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">value</span><span class="p">;</span>

    <span class="kd">private</span> <span class="nf">CmpVersion</span><span class="p">(</span><span class="n">String</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getValue</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">value</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>As we have already mentioned, an XML tag may have lots of artifacts besides its value: there can be attributes, children, but rather often (e.g., according to DTD or Schema) it should have only the value.
Of course such tags also need a DOM element to associate with.
And we provide such an element:</p>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span> <span class="nc">GenericDomValue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="n">T</span> <span class="nf">getValue</span><span class="p">();</span>
    <span class="kt">void</span> <span class="nf">setValue</span><span class="p">(</span><span class="n">T</span> <span class="n">t</span><span class="p">);</span>

    <span class="nd">@TagValue</span>
    <span class="n">String</span> <span class="nf">getStringValue</span><span class="p">();</span>

    <span class="nd">@TagValue</span>
    <span class="kt">void</span> <span class="nf">setStringValue</span><span class="p">(</span><span class="n">String</span> <span class="n">s</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>So, you can just specify a particular <code>T</code> when using this interface --- and everything will work.
Methods that work with <code>String</code> are provided for many reasons.
For example, your <code>T</code> is <a href="upsource:///java/java-psi-api/src/com/intellij/psi/PsiClass.java"><code>PsiClass</code></a>.
It would be useful to highlight invalid values in UI.
To get the value to highlight (the string from the XML file) we have the <code>getStringValue()</code> method.
The error message will be taken from the converter via <code>getErrorMessage()</code>.</p>
<h3 id="attributes">Attributes</h3>
<p>Attributes are also rather simple to deal with.
You can read their values, set them, and operate with different types.
So it's natural to create something like <code>GenericDomValue&lt;T&gt;</code> and then work as usual. "Something like" will be an inheritor, as shown below:</p>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span> <span class="nc">GenericAttributeValue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="n">GenericDomValue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="n">XmlAttribute</span> <span class="nf">getXmlAttribute</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>Consider that you want to work with an attribute named <em>some-class</em> having a value of type <code>PsiClass</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Attribute</span><span class="p">(</span><span class="s">&quot;some-class&quot;</span><span class="p">)</span>
<span class="n">GenericAttributeValue</span><span class="o">&lt;</span><span class="n">PsiClass</span><span class="o">&gt;</span> <span class="nf">getMyAttributeValue</span><span class="p">();</span>
</code></pre></div>
<p>That's all! Now you can get/set values, resolve this <code>PsiClass</code>, get its <code>String</code> representation, etc.
The name of the attribute will be taken from the method name (see next paragraph).
If you name your method in a special way, you can even omit the annotation.
For example:</p>
<div class="highlight"><pre><span></span><code><span class="n">GenericAttributeValue</span><span class="o">&lt;</span><span class="n">PsiClass</span><span class="o">&gt;</span> <span class="nf">getSomeClass</span><span class="p">();</span>
</code></pre></div>
<p>The <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/DomNameStrategy.java"><code>DomNameStrategy</code></a> interface specifies how to convert accessor names to XML element names.
Or more precisely, not the full accessor names, but rather the names minus any "get", "set" or "is" prefixes.
The strategy class is specified in the <code>@NameStrategy</code> annotation in any DOM element interface.
Then any descendants and children of this interface will use this strategy.
The default strategy is <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/HyphenNameStrategy.java"><code>HyphenNameStrategy</code></a>, where words are delimited by hyphens (see sample above).
Another common variant is <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/JavaNameStrategy.java"><code>JavaNameStrategy</code></a> that capitalizes the first letter of each word, as in Java's naming convention.
In our example, the attribute name would be "someClass".</p>
<p>If attribute doesn't define a <code>PsiClass</code>, but some other custom <code>T</code> that needs a converter, you just need to specify the <code>@Convert</code> annotation to the getter.</p>
<p>Please note that the attributes getter method will never return <code>null</code>, even if the attribute isn't specified in XML.
Its <code>getValue()</code>, <code>getStringValue()</code> and <code>getXmlAttribute()</code> methods will return <code>null</code>, but the DOM interface instance will exist and be valid.
If the element has an underlying attribute, this can be easily fixed (surely, only if you need that): just call the <code>undefine()</code> method (defined in <code>DomElement</code>), and the XML attribute disappears, while <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/GenericAttributeValue.java"><code>GenericAttributeValue</code></a> remains valid.</p>
<h3 id="children-fixed-number">Children: Fixed Number</h3>
<p>You may often deal with tags that have at most one sub-tag with the given name (e.g. <code>&lt;ejb-name&gt;</code>, <code>&lt;ejb-class&gt;</code> or <code>&lt;cmp-field&gt;</code>) in tags defining entity EJBs.
To work with such children, provide getters for them.
These getters should have a return type that extends <code>DomElement</code>:</p>
<div class="highlight"><pre><span></span><code><span class="n">GenericDomValue</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">getEjbName</span><span class="p">();</span>
<span class="n">GenericDomValue</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">getEjbClass</span><span class="p">();</span>
<span class="n">CmpField</span> <span class="nf">getCmpField</span><span class="p">();</span>
</code></pre></div>
<p>There's also an annotation to designate such children explicitly: <code>@SubTag</code>.
Its "value" attribute contains a tag name.
If it is not specified, the name is implied from the method name using the current name strategy.</p>
<p>Sometimes it is the sub-tag's presence that means something, rather than its content --- <code>&lt;unchecked&gt;</code> in EJB method permissions, for example.
If it exists, then permissions are unchecked, otherwise checked.
For such things one should create a special <code>GenericDomValue&lt;Boolean&gt;</code> child.
Usually its <code>getValue()</code> returns <code>true</code> if there's "true" in a tag value, <code>false</code> if there's "false" in a tag value, and <code>null</code> otherwise.
In the <code>@SubTag</code> annotation, you can specify the attribute like <code>indicator=true</code>.
In this case, <code>getValue()</code> will return <code>true</code> if the tag exists and <code>false</code> otherwise.</p>
<p>Let's consider another interesting example inspired by EJB, where there is a relation that has two roles, each designating one relation end: first role and second role.
Both are represented by tags with the same values.
So, we could create a collection of role elements, and every time we access some role we would check if this collection has sufficient number of elements.
But one of the main purposes of the DOM is to eliminate unnecessary checks.
So why cant we have a fixed (more than one) number of children with the same tag name? Let's have them!</p>
<div class="highlight"><pre><span></span><code><span class="nd">@SubTag</span><span class="p">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;ejb-relationship-role&quot;</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">EjbRelationshipRole</span> <span class="nf">getEjbRelationshipRole1</span><span class="p">();</span>

<span class="nd">@SubTag</span><span class="p">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;ejb-relationship-role&quot;</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">EjbRelationshipRole</span> <span class="nf">getEjbRelationshipRole2</span><span class="p">();</span>
</code></pre></div>
<p>The first method will return the DOM element for the first subtag named <code>&lt;ejb-relationship-role&gt;</code>, and the second --- for the second one.
Hence the term "fixed-number" for such children.
According to DTD or Schema, there should be fixed number of subtags with the given name.
Most often this fixed number is 1; in our case with the relations it is 2.
Just like attributes, fixed-number children exist regardless of underlying tag existence.
If you need to delete tags, it can be done with the help of the same <code>undefine()</code> method.</p>
<p>For children of <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/GenericDomValue.java"><code>GenericDomValue</code></a> type, you can also specify a converter, just as you can for attributes.</p>
<h3 id="children-collections">Children: Collections</h3>
<p>One more common case in DTD and Schemas is when children have the same tag name and a non-fixed upper limit in count.
Their accessors differ from those of the fixed-number children in the following: the return result is <code>Collection</code> or <code>List</code> of a special type that extends <code>DomElement</code>, and if you want to use name strategies, the method name must be in pluralized form.
For example, in EJB we would have the following method:</p>
<div class="highlight"><pre><span></span><code><span class="n">List</span><span class="o">&lt;</span><span class="n">Entity</span><span class="o">&gt;</span> <span class="nf">getEntities</span><span class="p">();</span>
</code></pre></div>
<p>There's also an annotation <code>@SubTagList</code> where you can explicitly specify the tag name.</p>
<p>Returned collections cannot be modified directly.
To delete an element from collection, just call <code>undefine()</code> on this element.
The tag will then be removed, and element will become invalid (<code>DomElement.isValid() == false</code>).
Note that this behavior differs from that of fixed-number children and attributes: they are always valid, even after <code>undefine()</code>.
Again, unlike those children types, collection children always have valid underlying XML tags.</p>
<p>Adding elements is a little bit harder.
Since all DOM elements are created internally, you can't just pass some of your DOM elements to some method, to add the element to the collection.
In fact, you have to ask a parent element to add a child to the collection.
In our example it's done in the following way:</p>
<div class="highlight"><pre><span></span><code><span class="n">Entity</span> <span class="nf">addEntity</span><span class="p">(</span><span class="kt">int</span> <span class="n">index</span><span class="p">);</span>
</code></pre></div>
<p>which adds an element to wherever you want, or</p>
<div class="highlight"><pre><span></span><code><span class="n">Entity</span> <span class="nf">addEntity</span><span class="p">();</span>
</code></pre></div>
<p>which adds a new DOM element to the end of the collection.
Please note the singular tense of the word "Entity".
That's because here we deal with one <code>Entity</code> object, while in the collection getter we dealt with potentially many entities.</p>
<p>Now, you can do anything you want with the returned value: modify, define the tag's value, children, etc.</p>
<p>The last common case is also a collection, but one consisting of tags with different names that are arbitrarily mixed.
To work with it, you should define collection getters for all tag names within the mixed collection, and then define an additional specially annotated getter:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// &lt;foo&gt; elements</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Foo</span><span class="o">&gt;</span> <span class="nf">getFoos</span><span class="p">();</span>

<span class="c1">// &lt;bar&gt; elements</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Bar</span><span class="o">&gt;</span> <span class="nf">getBars</span><span class="p">();</span>

<span class="c1">// all &lt;foo&gt; and &lt;bar&gt; elements</span>
<span class="nd">@SubTagsList</span><span class="p">({</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span><span class="p">})</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">FooBar</span><span class="o">&gt;</span> <span class="nf">getMergedListOfFoosAndBars</span><span class="p">();</span>
</code></pre></div>
<p>The annotation here is mandatory - we cannot guess several tag names from one method name.</p>
<p>To add elements to such mixed collections, you should create "add" methods for each possible tag name:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@SubTagsList</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="s">&quot;bar&quot;</span><span class="p">},</span> <span class="n">tagName</span><span class="o">=</span><span class="s">&quot;foo&quot;</span><span class="p">)</span> <span class="n">Fubar</span> <span class="nf">addFoo</span><span class="p">();</span>
<span class="nd">@SubTagsList</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="s">&quot;bar&quot;</span><span class="p">},</span> <span class="n">tagName</span><span class="o">=</span><span class="s">&quot;bar&quot;</span><span class="p">)</span> <span class="n">Fubar</span> <span class="nf">addBar</span><span class="p">(</span><span class="kt">int</span> <span class="n">index</span><span class="p">);</span>
</code></pre></div>
<p>The index parameter in the last example means the index in the merged collection, not in the collection of tags named "bar".</p>
<h3 id="dynamic-definition">Dynamic Definition</h3>
<p>You can extend existing DOM model at runtime by implementing <code>com.intellij.util.xml.reflect.DomExtender&lt;T&gt;</code>.
Register it in "extenderClass" attribute of EP <code>com.intellij.dom.extender</code>, where "domClass" specifies DOM class <code>&lt;T&gt;</code> to be extended. <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/reflect/DomExtensionsRegistrar.java"><code>DomExtensionsRegistrar</code></a> provides various methods to register dynamic attributes and children.</p>
<p>If the contributed elements depend on anything other than plain XML file content (used framework version, libraries in classpath, ...), make sure to return <code>false</code> from <code>DomExtender.supportsStubs()</code>.</p>
<h3 id="generating-dom-from-existing-xsd">Generating DOM from Existing XSD</h3>
<p>DOM can be generated automatically from existing XSD/DTD.
Output correctness/completeness will largely depend on the input scheme and may require additional manual adjustments.</p>
<p>Follow these steps:</p>
<ul>
<li>Run IntelliJ IDEA with <em>Plugin DevKit</em> enabled in <a href="/reference_guide/internal_actions/enabling_internal.md">internal mode</a></li>
<li>Select <em>Tools | Internal Actions | DevKit | Generate DOM Model</em></li>
<li>Select Scheme file and set options, then click "Generate" to generate sources</li>
<li>Modify generated sources according to your needs</li>
</ul>
<h3 id="ide-support">IDE Support</h3>
<p><em>Plugin DevKit</em> supports the following features for working with DOM related code:</p>
<ul>
<li><a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/DomElement.java"><code>DomElement</code></a> - provide implicit usages for all DOM-related methods defined in inheriting classes (to suppress "unused method" warning)</li>
<li><a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/DomElementVisitor.java"><code>DomElementVisitor</code></a> - provide implicit usages for all DOM-related visitor methods defined in inheriting classes (to suppress "unused method" warning)</li>
</ul>
<h2 id="working-with-the-dom">Working with the DOM</h2>
<h3 id="class-choosers">Class Choosers</h3>
<p>It often happens that a collection contains same-named tags that may have different structure or even be represented by different types in the DTD or Schema.
As an example, JSF Managed Beans may be of three types.
If a <code>&lt;managed-bean&gt;</code> tag contains a <code>&lt;map-entries&gt;</code> sub-tag, then the Managed Bean type is <code>MapEntriesBean</code>.
If it contains a <code>&lt;list-entries&gt;</code> sub-tag — can you guess? Right — <code>ListEntriesBean</code>! Otherwise it's a <code>PropertyBean</code> (all three interfaces extend <code>ManagedBean</code>).
And when we write <code>List&lt;ManagedBean&gt; getManagedBeans()</code>, we expect to get not only a list where all elements are instances of the <code>ManagedBean</code> interface, but a list where each element is of a certain type, i.e. <code>MapEntriesBean</code>, <code>ListEntriesBean</code>, or <code>PropertyBean</code>.</p>
<p>In such cases one should decide which interface the DOM element should actually implement (according to the given tag).
This is achieved by extending the <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/TypeChooser.java"><code>TypeChooser</code></a> abstract class:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">TypeChooser</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kd">abstract</span> <span class="n">Type</span> <span class="nf">chooseType</span><span class="p">(</span><span class="n">XmlTag</span> <span class="n">tag</span><span class="p">);</span>
    <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">distinguishTag</span><span class="p">(</span><span class="n">XmlTag</span> <span class="n">tag</span><span class="p">,</span> <span class="n">Type</span> <span class="n">aClass</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">IncorrectOperationException</span><span class="p">;</span>
    <span class="kd">public</span> <span class="kd">abstract</span> <span class="n">Type</span><span class="o">[]</span> <span class="nf">getChooserTypes</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>Here, the first method (<code>chooseType()</code>) does exactly what it is named after (chooses the particular type, most often it's a class).
The second one (<code>distinguishTag()</code>) acts in reverse: it modifies a tag so that when the element is read from an XML file next time (for example, after the user has closed and opened the project again), the newly created DOM element will implement the same interface and no model data will be lost.
Finally, <code>getChooserTypes()</code> just returns all the types that could be returned by <code>chooseType()</code>.</p>
<p>To make your <code>TypeChooser</code> work, register it in your overridden <code>DomFileDescription.initializeFileDescription()</code> method by calling <code>registerTypeChooser()</code>.</p>
<h3 id="useful-methods-of-domelement-and-dommanager">Useful Methods of DomElement and DomManager</h3>
<h4 id="psi-connection">PSI Connection</h4>
<p>Of course, DOM is tightly connected to XML PSI, so there's always a way of getting the <code>XmlTag</code> instance (which can be <code>null</code> for fixed-number children and attributes) using the <code>getXmlTag()</code> method.
We remember that in <code>GenericAttributeValue</code> there's also the <code>getXmlAttribute()</code> method.
In general case there is <code>getXmlElement()</code> method.
You can also get a DOM element by its underlying XML PSI element using the <code>DomManager.getDomElement()</code> method.</p>
<p>If DOM element has no underlying XML element, it can be created by calling <code>ensureTagExists()</code>.
To delete a tag, use the already known <code>undefine()</code> method.
This method will always delete the underlying XML element (tag or attribute).
If the element was a collection child, then neither it nor its entire sub-tree will be valid anymore.</p>
<h4 id="tree-structure">Tree Structure</h4>
<p>In every normal tree there's always a possibility to walk up. <code>DomElement</code> is no exception.
Method <code>getParent()</code> just returns element's parent in tree.</p>
<p>The method <code>&lt;T extends DomElement&gt; T getParentOfType(Class&lt;T&gt; requiredClass, boolean strict)</code> returns the tree ancestor of the given class.
You can see the standard <em>strict</em> parameter, that can return the DOM element itself, if it's <code>false</code> and your current DOM element is an instance of <em>requiredClass</em>.</p>
<p>Finally, <code>getRoot()</code> will return the <code>DomFileElement</code>, which is the root of every DOM tree.</p>
<h4 id="validity">Validity</h4>
<p>An element becomes invalid if it has been deleted explicitly or due to external PSI changes.
Fixed-number children and attributes are meant to stay valid as long as possible, no matter what happens with XML.
They can become invalid only if they have collection tree ancestor that has been deleted.</p>
<p>Newly created DOM elements are always correct and valid, so their <code>isValid()</code> methods will return <code>true</code>.</p>
<p>Element validity is very important, since you cannot invoke any methods on invalid elements (except, of course, <code>isValid()</code> itself).</p>
<h4 id="dom-reflection">DOM Reflection</h4>
<p>DOM also has a kind of reflection, called "Generic Info".
One would use it to be able to access children by tag names directly, instead of calling getter methods.
See <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/reflect/DomGenericInfo.java"><code>DomGenericInfo</code></a> interface and <code>getGenericInfo()</code> methods in <code>DomElement</code> and <code>DomManager</code> for more information.
There's also <code>DomElement.getXmlElementName()</code> method that returns the name of a corresponding tag or attribute.</p>
<h4 id="presentation">Presentation</h4>
<!-- TODO: using @Presentation -->

<p><code>DomElement.getPresentation()</code> returns an instance of <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/ElementPresentation.java"><code>ElementPresentation</code></a>, an interface that knows presentable element type, name, and sometimes even its icon.
Presentations are actually obtained from presentation factory objects that, like ClassChoosers's, should be registered in <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/ElementPresentationManager.java"><code>ElementPresentationManager</code></a> as early as possible.
You can specify type name and icon for all elements of some class, ways of getting type name, icon and presentable name for particular objects.
When not specified, presentable name is taken from the object itself, if it contains a method annotated with <code>@NameValue</code> annotation, that returns <code>String</code> or <code>GenericValue</code>.
If there's no such method, it will return <code>null</code>.
For <code>DomElement</code>, there's another way to get this presentable name:
<code>DomElement.getGenericInfo().getElementName()</code>.</p>
<h4 id="events">Events</h4>
<p>If you want to be notified on every change in the DOM model, add <code>DomEventListener</code> to <code>DomManager</code>.
DOM supports the following events: tag value changed, element defined/undefined/changed, and collection child added/removed.</p>
<h4 id="highlighting-annotations">Highlighting Annotations</h4>
<p>The DOM supports error checking and highlighting.
It's based on annotations which you add to the DOM element in a special place (don't confuse these annotations with the ones of Java 5 — they are very different).
You need to implement the <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/highlighting/DomElementsAnnotator.java"><code>DomElementAnnotator</code></a> interface, and override <code>DomFileDescription.createAnnotator()</code> method, and create this annotator there.
In <code>DomElementsAnnotator.annotate(DomElement element, DomElementsProblemsHolder annotator)</code> you should report about all errors and warnings in the element's sub-tree to the annotator (<code>DomElementsProblemsHolder.createProblem()</code>).
You should return this annotator in the corresponding virtual method of the <code>DomFileDescription</code>.</p>
<h4 id="automatic-highlighting-basicdomelementsinspection">Automatic Highlighting (BasicDomElementsInspection)</h4>
<p>The following errors can be highlighted automatically by providing an instance of <code>BasicDomElementsInspection</code>:</p>
<ul>
<li><code>@Required</code> element missing or having empty text</li>
<li>XML value cannot be converted by some <code>Converter</code></li>
<li>name is not unique while it should be</li>
</ul>
<p>The latter case requires you to specify the name getter with <code>@NameValue</code> annotation.
The checking uses the <code>DomFileDescription.getIdentityScope()</code> method to get the element defining the root scope in which the name should be unique.</p>
<p>To suppress spellchecking annotate your DomElement with <code>@com.intellij.spellchecker.xml.NoSpellchecking</code>.</p>
<h4 id="required-children">Required Children</h4>
<p>There is a common case in error highlighting, when one needs to say, that some required sub-tag or attribute is missing.
DOM will do this for you automatically, if you annotate the getter for that child with the <code>@Required</code> annotation.
For collection children getters, this annotation will mean, that the collection should be not empty (corresponding to '+' sign in DTD).
Also, when you create a new element that has required fixed-number or attribute children, their tags or attributes will also be created in XML.</p>
<h3 id="resolving">Resolving</h3>
<p>Remember the interface <code>GenericDomValue&lt;T&gt;</code> and its sub-interface <code>GenericAttributeValue&lt;T&gt;</code>? Remember, that ANY class may be passed as <code>T</code> — for example, let's interpret <code>GenericDomValue&lt;PsiClass&gt;</code> as a reference to a class.
Then we can always consider it as a reference to an object of class <code>T</code>! With Strings or enums, it is not a very useful idea, but we'll use it in another way.
Very often XML has such a structure that an object is declared at some place, and is referenced at some other place (more precisely, in a tag or attribute value).
So, if you want to create a method like <code>GenericValue&lt;MyDomElement&gt; getMyDomElementReference()</code>, then you just have to specify a proper converter that will find an instance in your model of <code>MyDomElement</code> with the name specified in the <code>GenericDomValue</code>.</p>
<p>That's the core idea.
Since creating such converters is quite boring, we've done it for you.
You don't have to annotate reference getters at all, as the name resolution will be made automatically.
Elements will be searched by name, and the name will be taken from the method annotated with <code>@NameValue</code>.
The converter used is <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/DomResolveConverter.java"><code>DomResolveConverter</code></a>.
Its constructor takes a parameter, so it can't be referenced in <code>@Convert</code> annotation, but its subclasses (if you create them) — can.
If you still want to specify explicitly that your reference to <code>DomElement</code> should be resolved "model-wide", use the <code>@Resolve</code> annotation parameterized with the desired class.
The resolution scope will be taken from the <code>DomFileDescription.getResolveScope()</code>.</p>
<p>In addition to the above, auto-resolving in DOM also provides some features in your XML text editor: error highlighting, completion, Find Usages, Rename Refactoring...
Unresolved references will be highlighted, and even completed.
If you want to create a custom converter and want to have this code insight with it, you should extend not only the <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/Converter.java"><code>Converter</code></a> but <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/ResolvingConverter.java"><code>ResolvingConverter</code></a>.
It has one more method <code>getVariants()</code>, where you'll have to provide the collection consisting of all targets your reference may resolve to.
Those familiar with <a href="upsource:///platform/core-api/src/com/intellij/psi/PsiReference.java"><code>PsiReference</code></a> will recognize the similarities here.</p>
<p>If you need to choose a <code>Converter</code> depending on other values (e.g. in sibling/parent element) or any runtime condition (e.g. presence or version of library), you can use <code>WrappingConverter</code>. See also <code>GenericDomValueConvertersRegistry</code> for managing an extensible registry of available Converters to choose from.</p>
<h3 id="mock-and-stable-elements">Mock and Stable Elements</h3>
<p>Your DOM elements do not have to be tied to a physical file. <code>DomManager.createMockElement()</code> will help you to create a virtual element of a given class with the given module.
An element may be physical or not. 'Physical' here means that DOM will create a mock document for it, so you can enjoy Undo functionality if you pass this document to the right place in file editor.</p>
<p><code>DomElement.copyFrom()</code> allows you to copy information from one <code>DomElement</code> to another.
In fact, it just replaces XML tags, and all the old data is lost.
Nevertheless, the element's fixed-number children don't become invalid, they only contain new tag values, attribute values, etc.
The tree is actually rather conservative.</p>
<p>The combination of <code>createMockElement()</code> and <code>copyFrom()</code> is useful for editing element contents in dialogs.
You create a mock copy of an element, work with it in the dialog and then, if the user doesn't cancel, copy the element back to the main model.
Since it's a common case, a special shortcut method has been created in <code>DomElement</code>, called <code>createMockCopy()</code>.</p>
<p>Consulo's XML parser is incremental: changes in text do not cause the whole file to be reparsed.
But you should keep in mind that this rule may sometimes not work correctly.
For example, your DOM elements can unexpectedly become broken as a result of manual editing of the XML file (even if it didn't happen inside those elements).
If a file editor depends on such a broken element, this can lead to closing the tab, which isn't very nice from the user's point of view.
For example, suppose you have an entity bean named "SomeEntity".
You open an editor for it, then you go into the XML, change the tag name from entity to session, and then back to entity.
Of course, no DOM element can survive after such blasphemy.
But notwithstanding, you still want your editor to stay open! Well, there is a solution, and it's called <code>DomManager.createStableValue(Factory factory)</code>.
This method creates a DOM element that delegates all its functionality to some real element (returned from the factory parameter).
As soon as that real element becomes invalid, the factory is called once more, and if it returns something valid, it becomes the new delegate.
And so on... In the example with EJB, the factory would once again look for an Entity Bean named "SomeEntity".</p>
<p>Stable DOM elements also implement the <code>StableElement</code> interface, which has the following methods:</p>
<ul>
<li><code>DomElement getWrappedElement()</code> — just returns the current element to which all method calls are delegated;</li>
<li><code>void invalidate()</code> — makes the wrapped element invalid. Any following method call will cause the factory to create a new delegate;</li>
<li><code>void revalidate()</code> — calls the factory, and if it returns something new (i.e. not the same as the current wrapped element) invalidates the old value and adopts the new one.</li>
</ul>
<h3 id="visitor">Visitor</h3>
<p>Visitor is a very common design pattern.
DOM model also has a visitor, and it's called <code>DomElementVisitor</code>.
The <code>DomElement</code> interface has methods <code>accept()</code> and <code>acceptChildren()</code> that take this visitor as a parameter.
If you look at the interface <code>DomElementVisitor</code> itself, you may be surprised, since it has only one method: <code>visitDomElement(DomElement)</code>.
Where is the Visitor pattern? Where are all those methods with names like <code>visitT(T)</code> that are usually found in it? There are no such methods, because the actual interfaces (T's) aren't known to anyone except you.
But when you instantiate the <code>DomElementVisitor</code> interface, you may add there these <code>visitT()</code> methods, and they will be called! You may even name them just <code>visit()</code>, specify the type of the parameter, and everything will be fine.
For example, if you have two DOM element classes — <code>Foo</code> and <code>Bar</code> — your visitor may look like this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span> <span class="nc">MyVisitor</span> <span class="kd">implements</span> <span class="n">DomElementVisitor</span> <span class="p">{</span>
    <span class="kt">void</span> <span class="nf">visitDomElement</span><span class="p">(</span><span class="n">DomElement</span> <span class="n">element</span><span class="p">)</span> <span class="p">{}</span>
    <span class="kt">void</span> <span class="nf">visitFoo</span><span class="p">(</span><span class="n">Foo</span> <span class="n">foo</span><span class="p">)</span> <span class="p">{}</span>
    <span class="kt">void</span> <span class="nf">visitBar</span><span class="p">(</span><span class="n">Bar</span> <span class="n">bar</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="implementation">Implementation</h3>
<p>Sometimes you may want to extend your model with some functionality that isn't directly connected with XML, but relates to your program logic.
And the most appropriate place for this functionality is the DOM element interface.
What to do then?</p>
<p>The simplest case is when you want to add to your interface a method that returns exactly what some other getter in this element (or in one of its children) returns.
You can easily write this helper method and annotate it with the <code>@PropertyAccessor</code> annotation, in which you should specify the path consisting of property names (getter names without the "get" or "is" prefixes).
For example, you can write:</p>
<div class="highlight"><pre><span></span><code><span class="n">GenericDomValue</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">getVeryLongName</span><span class="p">()</span>

<span class="nd">@PropertyAccessor</span><span class="p">(</span><span class="s">&quot;very-long-name&quot;</span><span class="p">)</span>
<span class="n">GenericDomValue</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">getName</span><span class="p">()</span>
</code></pre></div>
<p>In this case, the second method will return just the same as the first one.
If there were "foo.bar.name" instead of "very-long-name" in the annotation, the system would actually call <code>getFoo().getBar().getName()</code> and return the result to you.
Such annotations are useful when you're extending some interface that is inconsistent with your model, or you try to extract a common super-interface from two model interfaces with differently named children that have the same sense (see <code>&lt;ejb-ref&gt;</code> and <code>&lt;ejb-local-ref&gt;</code>).</p>
<p>The case just described is simple, but rare.
More often, you really have to incorporate some logic into your model.
Then nothing except Java code helps you.
And it will.
Add the desired methods to your interface, then create an abstract class implementing the interface, and implement there only methods that you added manually and that are not directly connected to your XML model.
Note that the class should have a constructor with no arguments.</p>
<p>Now you only have to let DOM know that you wish to use this implementation every time you're creating a model element that should implement the necessary interface.
Simply register it using extension point <code>com.intellij.dom.implementation</code> and DOM will generate at run-time the class that not only implements the needed interface, but also extends your abstract class.</p>
<h3 id="models-across-multiple-files">Models Across Multiple Files</h3>
<p>Many frameworks require a set of XML configuration files ("fileset") to work as one model, so resolving/navigation works across all related DOM files.
Depending on implementation/plugin, providing filesets implicitly (using existing framework's setup in project) or via user configuration (usually via dedicated <code>Facet</code>) can be achieved.</p>
<p>Extend <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/model/impl/DomModelFactory.java"><code>DomModelFactory</code></a> (or <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/model/impl/BaseDomModelFactory.java"><code>BaseDomModelFactory</code></a> for non-<code>Module</code> scope) and provide implementation of your <code>DomModel</code>.
Usually you will want to add searcher/utility methods to work with your <code>DomModel</code> implementation.
Example can be found in Struts 2 plugin (package <code>com.intellij.struts2.dom.struts.model</code>).</p>
<h3 id="dom-stubs">DOM Stubs</h3>
<blockquote>
<p><strong>NOTE</strong> Please use it sparingly and only for heavily accessed parts in your DOM model, as it increases disk space usage/indexing run time.</p>
</blockquote>
<p>DOM elements can be stubbed, so (costly) access to XML/PSI is not necessary (see <a href="/basics/indexing_and_psi_stubs.md">Indexing and PSI Stubs</a> for similar feature for custom languages).
Performance relevant elements, tag or attribute getters can simply be annotated with <code>@com.intellij.util.xml.Stubbed</code>.
Return <code>true</code> from <code>DomFileDescription.hasStubs()</code> and increase <code>DomFileDescription.getStubVersion()</code> whenever you change <code>@Stubbed</code> annotations usage in your DOM hierarchy to trigger proper rebuilding of Stubs during indexing.</p>
<h2 id="building-a-dom-based-gui">Building a DOM-Based GUI</h2>
<h3 id="forms">Forms</h3>
<p>All forms that deal with DOM are organized in a special way.
They support two main things: getting data from XML into the UI, and saving UI data to XML.
The former is called resetting, the latter — committing.
There's <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/ui/Committable.java"><code>Committable</code></a> interface that has corresponding methods: <code>commit()</code> and <code>reset()</code>.
There's also a way of structuring your forms into smaller parts, namely the Composite pattern: <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/ui/CompositeCommittable.java"><code>CompositeCommittable</code></a>.
Methods <code>commit()</code> and <code>reset()</code> are invoked automatically on editor tab switch or undo.
So you only need to ensure that all your Swing structure is organized in a tree of <code>CompositeCommittable</code>, and all the hard work will be done by the IDE.</p>
<p>DOM controls are special descendants of <code>Committable</code>.
All of them implement <code>DomUIControl</code>.
Note that they are not Swing components — they are only a way of connecting DOM model and Swing components.
One end of the connection — the DOM element — is usually specified in the controls constructor.
The other end — Swing component — can be obtained in 2 ways.
The first is to ask DOM control to create it.
But that is rather inconvenient if you want to create the forms in, say, IntelliJ IDEA's GUI Designer.
In that case, you'll need the second way: ask the control to <code>bind()</code> to an existing Swing component of a correct type (that depends on the type of value that you're editing).
After that, your Swing components will be synchronized with DOM, they'll even highlight errors reported by <code>DomElementsAnnotator</code>.</p>
<p>Sometimes you may need to do some work (enable or disable some components, change their values) after a particular DOM control is committed.
Then you should define the <code>addCommitListener()</code> method of that DOM control and override the <code>CommitListener.afterCommit()</code> method.
This method will be invoked inside the same write action as the main <code>commit()</code>, so any changes you do in this method to the XML will be merged with the <code>commit()</code> in the Undo queue.</p>
<h3 id="simple-controls">Simple Controls</h3>
<p>With simple controls, you can edit <code>GenericDomValue</code>: simple text, class names, enums and boolean values.
These controls take a special object as a constructor parameter.
This object should implement the <code>DomWrapper</code> interface that knows how to set/get values to/from DOM model.</p>
<p>We have three major DomWrapper's: <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/ui/DomFixedWrapper.java"><code>DomFixedWrapper&lt;T&gt;</code></a> redirecting calls to <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/GenericDomValue.java"><code>GenericDomValue&lt;T&gt;</code></a>, <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/ui/DomStringWrapper.java"><code>DomStringWrapper</code></a> redirecting calls to string accessors of <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/GenericDomValue.java"><code>GenericDomValue</code></a>, and <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/ui/DomCollectionWrapper.java"><code>DomCollectionWrapper</code></a> that gets/sets values of the first element of the given <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/GenericDomValue.java"><code>GenericDomValue</code></a> collection.
Some controls (those having a text field as part of itself) take additional boolean constructor parameter — <em>commitOnEveryChange</em>, whose meaning is evident from the name.
We don't recommend using it anywhere except small dialogs, because committing on every change slows down the system significantly.</p>
<p>Most often these controls are created by <code>DomUIFactory.createControl(GenericDomValue)</code>.
This method understands which control to create by using DOM reflection (<code>DomGenericInfo</code>, as you probably remember).
But sometimes you may want to create the controls directly.
So let's look at the simple controls more closely.</p>
<h5 id="booleancontrol">BooleanControl</h5>
<p>It allows you to edit boolean values.
The control is bound to <code>JCheckBox</code>.</p>
<p><img alt="BooleanControl" src="../img/xml_dom_api/booleancontrol.gif" /></p>
<h5 id="combocontrol">ComboControl</h5>
<p>The control is bound to a non-editable <code>JComboBox</code>, so it can be used to choose something from a limited set.
One case of such a limited set is enum.
Or it can be a constructor where you can provide a <code>Factory&lt;List&lt;String&gt;&gt;</code>, and return from this factory anything you want (for example, a list of database names to choose from).
By default, the wrong values (written in XML, but not present in the list you've given to the control) are displayed in red.
Since it's common practice to specify custom <code>CellRenderer</code> for combo boxes, the control has the <code>isValidValue(String)</code> method.
If it returns <code>false</code> on the value you're rendering, you can highlight it in some way, to achieve the same result as the default renderer.
Or you can just delegate to that renderer in your own way.</p>
<p><img alt="ComboControl" src="../img/xml_dom_api/combocontrol.gif" /></p>
<h5 id="booleanenumcontrol">BooleanEnumControl</h5>
<p>Sometimes, when there are only 2 alternatives, it's convenient to use a check box instead of combo box.
This control is designed specially for such cases.
While being (and being bound to) a check box, the control edits not just "true" or "false", but any two String values, or two enum elements.
In the last case, it has a boolean <em>invertedOrder</em> parameter, to specify which element corresponds to the checked state.
By default <em>invertedOrder</em> is set to <code>false</code>, so the first element corresponds to the unchecked state, and the second — to the checked one.
If you set the parameter to <code>true</code>, the states will swap.</p>
<h3 id="editor-based-controls">Editor-Based Controls</h3>
<p>Please note that editor-based controls are built on Consulo's <code>Editor</code> instead of standard <code>JTextField</code>.
Since there's currently no way to instantiate Editor directly through the Open API, controls are bound to special <code>JPanel</code> inheritors, and their <code>bind()</code> method adds the necessary content to those panels.</p>
<h5 id="textcontrol">TextControl</h5>
<p>This control allows you to edit simple string values.
The control is bound to a <code>TextPanel</code> component.
There's also an inheritor of that panel — <code>MultiLineTextPanel</code>.
If you bind a <code>StringControl</code> to it, a big editor will appear on the screen.
In case you don't have space for a big editor, bind it to a <code>BigTextPanel</code>.
Then it will be filled with a text editor, and the browse button will be added to open a dialog with the big editor where you can type a longer string.</p>
<h5 id="psiclasscontrol">PsiClassControl</h5>
<p>This is a one-line editor with a browse button that opens the standard class selection dialog.
The control accepts class names only.
It is bound to <code>PsiClassPanel</code>.</p>
<p><img alt="PsiClassControl" src="../img/xml_dom_api/psiclasscontrol.gif" /></p>
<h5 id="psitypecontrol">PsiTypeControl</h5>
<p>This is almost the same as PsiClassControl, but allows entering not only class names, but also Java primitive types and even arrays.
It is bound to <code>PsiTypePanel</code>.</p>
<h3 id="collection-control">Collection Control</h3>
<p>There is a special table component where each row represents one collection child.
It's called <code>DomCollectionControl&lt;T&gt;</code>, where <code>T</code> is your collection element type.
To function properly, it needs <code>DomElement</code> (parent of the collection), some description of the collection (sub-tag name or a <code>DomCollectionChildDescription</code> from DOM reflection), and a <code>ColumnInfo</code> array.
This can be passed to the constructor, or can be created in a <code>DomCollectionControl</code> inheritor, in an overriden method <code>createColumnInfos()</code>.</p>
<p>What is a column info? It's just a somewhat more comfortable way to work with the table model.
It uses Java 5 generics and is more object-oriented.
So, it's named <code>ColumnInfo&lt;Item,Aspect&gt;</code>, where <code>Item</code> is a type variable corresponding to the type of elements in the collection, and <code>Aspect</code> is a type variable corresponding to this particular column information type: <code>String</code>, <code>PsiClass</code>, <code>Boolean</code>, etc.
The basic things that a column knows are: column name, column class, reading value (Aspect <code>valueOf(Item)</code>), writing value (<code>setValue(Item item, Aspect aspect)</code>), cell renderer (<code>getRenderer(Item)</code>), cell "editability" (<code>isCellEditable(Item)</code>), cell editor (<code>getEditor(Item)</code>), etc.</p>
<p>There are a lot of predefined column infos, so you'll probably never create a new one.</p>
<p>First, if a collection child is a <code>GenericDomValue</code>, it's usually convenient to edit it directly in the table.
For this, you may need one of the following classes: <code>StringColumnInfo</code>, <code>BooleanColumnInfo</code>, or more generic <code>GenericValueColumnInfo</code>.
But such collections are encountered very rarely.</p>
<p>A more common case is when a collection element is more complex and has several <code>GenericDomValue</code> children.
Then one may create a column for each of those children.
The appropriate column info is <code>ChildGenericValueColumnInfo&lt;T&gt;</code>.
It will ask you for a <code>DomFixedChildDescription</code> (one more thing from DOM reflection), a renderer and an editor — nothing else.
So, the main things left to customize are the renderer and the editor.</p>
<p>As for the renderer, there are two main choices: <code>DefaultTableCellRenderer</code>, and Consulo's <code>BooleanTableCellRenderer</code>.
Editors are more complicated, but they closely resemble simple DOM controls.</p>
<p><code>BooleanTableCellEditor</code>, <code>DefaultCellEditor(JTextField)</code>, <code>ComboTableCellEditor</code>, etc. <code>DomUIFactory.createCellEditor()</code> will create any of them automatically (including the editor for <code>PsiClass</code>), so that you won't need to think about which one to select every time.</p>
<p>Collection control is a complex control, so it's bound to a complex Swing component.
It's called <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/ui/DomTableView.java"><code>DomTableView</code></a>.
It has a toolbar (you can override <code>DomTableView.getToolbarPosition()</code> to customize its location), with Add and Delete buttons.
If you want, you may specify custom addition actions in <code>DomCollectionControl.createAdditionActions()</code> (it's recommended to extend <code>ControlAddAction</code>).
If there is only one addition action, it will be invoked after pressing the Add button; if there are many, then a popup menu will be displayed.
To change the removal policy, override the <code>DomCollectionControl.doRemove(List&lt;T&gt;)</code> method.</p>
<p>The toolbar may also have an Edit button, if you specify that <code>DomCollectionControl.isEditable()</code>.
To add a behavior to this button, override <code>DomCollectionControl.doEdit(T)</code>.
There can also be a Help button, if you pass a non-null String <em>helpId</em> parameter while constructing your <code>DomTableView</code>.</p>
<p>If there are no items in the collection, <code>DomTableView</code> may display a special text (<code>DomTableView.getEmptyPaneText()</code>), instead of an empty table.</p>
<p>You can add your own popup menu to the control.
Call the <code>DomTableView.installPopup()</code> method after construction, and pass a <code>DefaultActionGroup</code> with your popup actions.</p>
<p>Tables can have single or multiple (default) row selection.
If you want to change this behavior, override <code>DomTableView.allowMultipleRowsSelection()</code>.</p>
<p><img alt="CollectionControl" src="../img/xml_dom_api/collectioncontrol.gif" /></p>
<h3 id="ui-organization">UI Organization</h3>
<p>The easiest way to create a DOM-based UI form is to extend the <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/ui/BasicDomElementComponent.java"><code>BasicDomElementComponent</code></a> class.
This will require you to pass some DOM element to the constructor.
Then you bind an IntelliJ IDEA GUI Designer form to your subclass and design a beautiful form there.
You will surely want to bind some controls to DOM UI, in which case you should of course ensure that they have right types.
Finally, you should create some DOM controls in class' constructor and bind them.
But you can create controls and bind them to the <code>DomElement</code>'s children — <code>GenericDomValue</code>'s automatically.</p>
<p>Just name your components properly and call the <code>bindProperties()</code> method in the constructor.
The field names should correspond to the getter names for the element's children.
They may also be prefixed with "my".
Imagine that you have such DOM interface:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Converter</span> <span class="kd">extends</span> <span class="n">DomElement</span> <span class="p">{</span>
    <span class="n">GenericDomValue</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">getConverterId</span><span class="p">();</span>
    <span class="n">GenericDomValue</span><span class="o">&lt;</span><span class="n">PsiClass</span><span class="o">&gt;</span> <span class="nf">getConverterClass</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>In this case, the UI form class can look like this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConverterComponent</span> <span class="kd">extends</span> <span class="n">BasicDomElementComponent</span><span class="o">&lt;</span><span class="n">Converter</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="n">JPanel</span> <span class="n">myRootPane</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">TextPanel</span> <span class="n">myConverterId</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">PsiClassPanel</span> <span class="n">myConverterClass</span><span class="p">;</span>

    <span class="kd">public</span> <span class="nf">ConverterComponent</span><span class="p">(</span><span class="kd">final</span> <span class="n">Converter</span> <span class="n">domElement</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">super</span><span class="p">(</span><span class="n">domElement</span><span class="p">);</span>

        <span class="n">bindProperties</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>All the fields here are now bound to controls in a GUI form.</p>
<p>Very often you'll have to create your own file editor.
Then, to use all the binding and undo functionality, it's suggested to inherit your <a href="upsource:///platform/analysis-api/src/com/intellij/openapi/fileEditor/FileEditorProvider.java"><code>FileEditorProvider</code></a> from <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/ui/PerspectiveFileEditorProvider.java"><code>PerspectiveFileEditorProvider</code></a>, create an instance of <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/ui/DomFileEditor.java"><code>DomFileEditor</code></a> there, and pass a <a href="upsource:///xml/dom-openapi/src/com/intellij/util/xml/ui/BasicDomElementComponent.java"><code>BasicDomElementComponent</code></a>.
To easily create an editor with a caption at the top, like in our EJB and JSF, you may use the static method <code>DomFileEditor.createDomFileEditor()</code>. <code>DomFileEditor</code> automatically listens to all changes in the document corresponding to the given DOM element, and therefore refreshes your component on undo.
If you want to listen to changes in additional documents, use the methods <code>addWatchedDocument()</code>, <code>removeWatchedDocument()</code>, <code>addWatchedElement()</code>, <code>removeWatchedElement()</code> in <code>DomFileEditor</code>.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Thank you for your time and attention.
We hope you've found this article really useful.
You are welcome to post your questions and comments to our <a href="https://intellij-support.jetbrains.com/hc/en-us/community/topics/200366979-IntelliJ-IDEA-Open-API-and-Plugin-Development">Open API and Plugin Development Forum</a>.</p>
<h3 id="further-material">Further Material</h3>
<p>The following bundled open-source plugins make (heavy) use of DOM:</p>
<ul>
<li><a href="https://github.com/JetBrains/android">Android</a></li>
<li><a href="upsource:///plugins/ant">Ant</a></li>
<li><a href="upsource:///plugins/devkit/devkit-core">Plugin DevKit</a></li>
<li><a href="upsource:///plugins/maven">Maven</a></li>
<li><a href="https://github.com/JetBrains/intellij-plugins/tree/master/struts2">Struts 2</a> (Ultimate Edition)</li>
</ul>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../../../basics/indexing_and_psi_stubs/stub_indexes/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Stub Indexes" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Stub Indexes
            </div>
          </div>
        </a>
      
      
        
        <a href="../../../basics/run_configurations/" class="md-footer__link md-footer__link--next" aria-label="Next: Overview" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Overview
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.tabs"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.0bbba5b5.min.js"}</script>
    
    
      <script src="../../../assets/javascripts/bundle.e1a181d9.min.js"></script>
      
    
  </body>
</html>